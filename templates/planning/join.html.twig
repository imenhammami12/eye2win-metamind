{% extends 'base.html.twig' %}

{% block title %}Join Session - EyeTwin{% endblock %}

{% block body %}
    <!-- breadcrumb -->
    <section class="breadcrumb breadcrumb_bg" style="background: #0f172a;">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumb_iner text-center">
                        <div class="breadcrumb_iner_item">
                            <h2 style="font-weight: 800; color: #fff;">Join Session</h2>
                            <p style="color: #94a3b8;">
                                <a href="{{ path('app_home') }}" style="color: #cbd5e1;">Home</a> 
                                <span style="color: #64748b;">-</span> 
                                <a href="{{ path('app_planning_index') }}" style="color: #cbd5e1;">Planning</a>
                                <span style="color: #64748b;">-</span> 
                                Join
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Join Confirmation -->
    <section class="section_padding" style="background: #0b1120; min-height: 60vh;">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="join-card">
                        <div class="row">
                            <!-- Session Info Column -->
                            <div class="col-md-5">
                                <div class="session-preview">
                                    {% if planning.image %}
                                        <img src="{{ asset('uploads/planning/' ~ planning.image) }}" alt="Session" class="img-fluid rounded mb-3">
                                    {% else %}
                                        <img src="https://via.placeholder.com/400x300?text=Session" alt="Session" class="img-fluid rounded mb-3">
                                    {% endif %}
                                    
                                    <span class="badge-type">{{ planning.type.value }}</span>
                                    <h3 class="session-title mt-3">{{ planning.description }}</h3>
                                    
                                    <div class="session-info mt-4">
                                        <div class="info-row">
                                            <i class="fas fa-signal"></i>
                                            <span>{{ planning.level.value }}</span>
                                        </div>
                                        <div class="info-row">
                                            <i class="far fa-calendar-alt"></i>
                                            <span>{{ planning.date|date('M d, Y') }}</span>
                                        </div>
                                        <div class="info-row">
                                            <i class="far fa-clock"></i>
                                            <span>{{ planning.time|date('H:i') }}</span>
                                        </div>
                                        <div class="info-row">
                                            <i class="fas fa-map-marker-alt"></i>
                                            <span>{{ planning.localisation }}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Form Column -->
                            <div class="col-md-7">
                                <div class="p-4">
                                    <h4 class="form-title">Registration Details</h4>
                                    <p class="text-muted mb-4">Please review your registration information below</p>

                                    <form method="post">
                                        <div class="form-group mb-3">
                                            <label class="form-label">
                                                <i class="fas fa-user me-2"></i>Participant Name
                                            </label>
                                            <input type="text" 
                                                   class="form-control-readonly" 
                                                   value="{{ app.user.username }}" 
                                                   readonly>
                                        </div>

                                        <div class="form-group mb-3">
                                            <label class="form-label">
                                                <i class="far fa-clock me-2"></i>Registration Date & Time
                                            </label>
                                            <input type="text" 
                                                   class="form-control-readonly" 
                                                   value="{{ 'now'|date('M d, Y - H:i') }}" 
                                                   readonly>
                                        </div>

                                        <div class="form-group mb-4">
                                            <label class="form-label">
                                                <i class="fas fa-info-circle me-2"></i>Status
                                            </label>
                                            <input type="text" 
                                                   class="form-control-readonly status-pending" 
                                                   value="Pending" 
                                                   readonly>
                                            <small class="text-muted d-block mt-1">Your registration will be reviewed by the admin</small>
                                        </div>

                                        <div class="d-flex gap-3">
                                            <button type="submit" class="btn-confirm flex-grow-1">
                                                <i class="fas fa-check me-2"></i>Confirm Registration
                                            </button>
                                            <a href="{{ path('app_planning_index') }}" class="btn-cancel">
                                                <i class="fas fa-times me-2"></i>Cancel
                                            </a>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <style>
        .join-card {
            background: #1e293b;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
            border: 1px solid rgba(255,255,255,0.05);
        }

        .session-preview {
            padding: 30px;
        }

        .session-preview img {
            width: 100%;
            height: 250px;
            object-fit: cover;
        }

        .badge-type {
            background: rgba(99, 102, 241, 0.2);
            color: #818cf8;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border: 1px solid rgba(99, 102, 241, 0.3);
        }

        .session-title {
            color: #f8fafc;
            font-weight: 700;
            font-size: 1.5rem;
            line-height: 1.3;
        }

        .session-info {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .info-row {
            display: flex;
            align-items: center;
            gap: 12px;
            color: #cbd5e1;
            font-size: 1rem;
        }

        .info-row i {
            color: #6366f1;
            width: 20px;
        }

        .form-title {
            color: #f8fafc;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .text-muted {
            color: #94a3b8 !important;
        }

        .form-label {
            color: #cbd5e1;
            font-weight: 600;
            margin-bottom: 8px;
            display: block;
        }

        .form-control-readonly {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            color: #f8fafc;
            padding: 12px 16px;
            border-radius: 10px;
            width: 100%;
            font-size: 1rem;
            cursor: not-allowed;
        }

        .status-pending {
            background: rgba(251, 191, 36, 0.1);
            border-color: rgba(251, 191, 36, 0.3);
            color: #fbbf24;
            font-weight: 600;
        }

        .alert-box {
            background: rgba(99, 102, 241, 0.1);
            border: 1px solid rgba(99, 102, 241, 0.2);
            border-radius: 12px;
            padding: 16px;
            color: #cbd5e1;
        }

        .alert-box i {
            color: #818cf8;
            margin-right: 8px;
        }

        .btn-confirm {
            background: linear-gradient(45deg, #6366f1, #4f46e5);
            color: white;
            border: none;
            padding: 14px 32px;
            border-radius: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(99, 102, 241, 0.3);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn-confirm:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(99, 102, 241, 0.5);
            color: white;
        }

        .btn-cancel {
            background: rgba(255,255,255,0.05);
            color: #cbd5e1;
            border: 1px solid rgba(255,255,255,0.1);
            padding: 14px 32px;
            border-radius: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn-cancel:hover {
            background: rgba(255,255,255,0.1);
            color: #f8fafc;
        }

        @media (max-width: 768px) {
            .join-card .row {
                flex-direction: column;
            }
            
            .session-preview {
                padding: 20px;
            }
        }
    </style>
{% endblock %}
